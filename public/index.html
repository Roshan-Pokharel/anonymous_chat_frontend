<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Anonymous Chat</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Modals -->
    <div id="userModal" class="modal">
      <form id="userForm" class="modal-content">
        <h2 style="margin-bottom: 18px; color: #4f46e5; text-align: center">
          ğŸ‘¤ Welcome! Set your profile
        </h2>
        <input
          type="text"
          id="nicknameInput"
          placeholder="Nickname"
          required
          maxlength="20"
        />
        <input
          type="number"
          id="ageInput"
          placeholder="Age"
          min="18"
          max="99"
          required
        />
        <div class="gender-group">
          <label
            ><input type="radio" name="gender" value="male" checked />
            <span style="color: #3b82f6; font-weight: 600">â™‚ Male</span></label
          >
          <label
            ><input type="radio" name="gender" value="female" />
            <span style="color: #e75480; font-weight: 600"
              >â™€ Female</span
            ></label
          >
        </div>
        <button type="submit">Start Chatting ğŸš€</button>
      </form>
    </div>
    <div id="allUsersModal" class="modal" style="display: none">
      <div class="modal-content" style="max-height: 70vh; overflow-y: auto">
        <h3 style="margin-bottom: 12px; color: #4f46e5; text-align: center">
          Online Users
        </h3>
        <div id="allUsersList"></div>
        <button
          onclick="document.getElementById('allUsersModal').style.display='none';"
          style="margin-top: 16px"
        >
          Close
        </button>
      </div>
    </div>

    <!-- Main UI -->
    <div id="topBar">
      <span id="roomTitle">ğŸŒ Public Chat</span>
      <div class="top-bar-buttons">
        <button id="theme-toggle" title="Toggle dark mode">ğŸŒ™</button>
        <button id="showUsersBtn">ğŸ‘¥ Users</button>
      </div>
    </div>
    <div class="container">
      <div id="sidebar">
        <div id="userListContainer" style="flex: 1; overflow-y: auto">
          <h3 style="margin-bottom: 12px">ğŸ‘¥ Users</h3>
          <div id="userList"></div>
        </div>
        <!-- Background Settings -->
        <div class="background-settings">
          <h4>ğŸ¨ Room Background</h4>
          <input type="text" id="backgroundInput" placeholder="Image URL..." />
          <button id="setBackgroundBtn">Set Background</button>
        </div>
      </div>
      <div id="chat">
        <div id="messages"></div>
        <!-- NEW HTML STRUCTURE FOR INPUT AREA -->
        <div id="input-area">
          <div id="typing-indicator"></div>
          <div id="error-message"></div>
          <form id="form" autocomplete="off">
            <input
              id="input"
              type="text"
              placeholder="Type your message..."
              autocomplete="off"
              maxlength="500"
            />
            <button type="submit">Send</button>
          </form>
        </div>
      </div>
    </div>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>

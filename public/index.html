<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Anonymous Chat & Doodle</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="userModal" class="modal">
      <form id="userForm" class="modal-content">
        <h2 style="margin-bottom: 18px; color: #4f46e5; text-align: center">
          👤 Welcome! Set your profile
        </h2>
        <input
          type="text"
          id="nicknameInput"
          placeholder="Enter your Nickname"
          required
          maxlength="20"
        />
        <input
          type="number"
          id="ageInput"
          placeholder="Enter your Age"
          min="18"
          max="99"
          required
        />
        <button type="submit">Start Chatting</button>
      </form>
    </div>

    <div id="allUsersModal" class="modal">
      <div class="modal-content">
        <button class="modal-close-btn" id="closeAllUsersModalBtn">
          &times;
        </button>
        <h2 style="color: #4f46e5; text-align: center">All Users</h2>
        <ul id="allUsersList"></ul>
      </div>
    </div>

    <div id="createGameModal" class="modal">
      <form id="createGameForm" class="modal-content">
        <h2 style="color: #4f46e5; text-align: center">🎮 Create Game Room</h2>
        <input
          type="text"
          id="roomNameInput"
          placeholder="Enter Room Name"
          required
          maxlength="30"
        />
        <button type="submit">Create Room</button>
        <button type="button" class="btn-secondary" id="cancelCreateGameBtn">
          Cancel
        </button>
      </form>
    </div>

    <div id="scoreboardModal" class="modal">
      <div class="modal-content">
        <button class="modal-close-btn" id="closeScoreboardModalBtn">
          &times;
        </button>
        <h2 id="scoreboardTitle">Current Scores</h2>
        <div id="scoreboardContent"></div>
      </div>
    </div>

    <div id="finalScoreboardModal" class="modal">
      <div class="modal-content">
        <button class="modal-close-btn" id="closeFinalScoreboardModalBtn">
          &times;
        </button>
        <h2 id="finalScoreboardTitle">Game Over! Final Scores:</h2>
        <ul id="finalScoresList"></ul>
      </div>
    </div>

    <div id="mobile-topbar">
      <button id="sidebar-toggle-btn">☰</button>
      <div id="roomTitle">Anonymous Chat & Doodle</div>
      <button id="theme-toggle">☀️</button>
    </div>
    <div id="mobile-sidebar-backdrop"></div>

    <div id="chatContainer">
      <div id="sidebar">
        <div class="sidebar-header">
          <div id="desktop-topbar">
            <h1 style="color: var(--primary-accent)">Anonymous Doodle</h1>
            <button id="theme-toggle">☀️</button>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>👥 Online Users</h3>
          <ul id="userList"></ul>
          <button
            id="showUsersBtn"
            class="btn-secondary"
            style="margin-top: 10px"
          >
            Show All Users
          </button>
        </div>

        <div class="sidebar-section game-controls-desktop">
          <h3>🎮 Game Rooms</h3>
          <button id="createGameRoomBtn">Create New Game</button>
          <div id="gameRoomListDesktop">
            <p class="no-rooms-msg">No active game rooms.</p>
          </div>
          <button id="startGameBtn" style="display: none">Start Game</button>
          <button id="stopGameBtn" class="btn-secondary" style="display: none">
            Stop Game
          </button>
          <button
            id="leaveRoomBtn"
            class="btn-secondary"
            style="display: none; margin-top: 8px"
          >
            Leave Room
          </button>
        </div>

        <div class="sidebar-section" id="gameControlsMobile">
          <h3>🎮 Game Rooms</h3>
          <button id="createGameRoomBtnMobile">Create New Game</button>
          <div id="gameRoomListMobile">
            <p class="no-rooms-msg">No active game rooms.</p>
          </div>
          <button id="startGameBtnMobile" style="display: none">
            Start Game
          </button>
          <button
            id="stopGameBtnMobile"
            class="btn-secondary"
            style="display: none"
          >
            Stop Game
          </button>
          <button
            id="leaveRoomBtnMobile"
            class="btn-secondary"
            style="display: none; margin-top: 8px"
          >
            Leave Room
          </button>
        </div>

        <div class="background-settings">
          <h4>🎨 Room Background</h4>
          <div id="backgroundOptions" class="background-options-grid"></div>
        </div>
      </div>

      <div id="chat">
        <div id="gameContainer" style="display: none">
          <div id="gameInfo"></div>
          <div id="roundEndMessageDisplay" style="display: none"></div>
          <canvas id="gameCanvas"></canvas>
          <div id="drawingTools" style="display: none">
            <button id="clearCanvasBtn">Clear</button>
          </div>
        </div>

        <div id="messages"></div>

        <div id="input-area">
          <div id="typing-indicator"></div>
          <div id="error-message"></div>
          <form id="form" autocomplete="off">
            <input
              id="input"
              type="text"
              placeholder="Type your message or guess..."
              autocomplete="off"
              maxlength="500"
            />
            <button type="submit">Send</button>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
